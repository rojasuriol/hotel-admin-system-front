<div class="container-fluid px-4 mt-4">
  <!-- Header de Habitaciones -->
  <div class="rooms-hero-section mb-5">
    <div class="container-fluid">
      <div class="row align-items-center">
        <div class="col-md-8">
          <button class="btn-back" (click)="volverAHoteles()">
            <i class="fas fa-arrow-left"></i>
            <span>Volver a Hoteles</span>
          </button>
          <div class="hotel-title-section">
            <h1 class="hotel-main-title">{{ hotelNombre() }}</h1>
            <p class="hotel-subtitle">
              <i class="fas fa-map-marker-alt me-2"></i>
              Gesti칩n de Habitaciones
            </p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="rooms-stats-premium">
            <div class="stat-card available">
              <div class="stat-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <div class="stat-content">
                <span class="stat-number">{{ getHabitacionesDisponibles().length }}</span>
                <span class="stat-label">Disponibles</span>
              </div>
            </div>
            <div class="stat-card occupied">
              <div class="stat-icon">
                <i class="fas fa-times-circle"></i>
              </div>
              <div class="stat-content">
                <span class="stat-number">{{ getHabitacionesOcupadas().length }}</span>
                <span class="stat-label">Ocupadas</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  @if (loading()) {
  <div class="loading-rooms text-center py-5">
    <div class="room-loader">
      <div class="room-door"></div>
      <div class="room-key"></div>
    </div>
    <h4 class="text-primary mt-4">Cargando habitaciones...</h4>
    <p class="text-muted">Preparando la informaci칩n de las habitaciones</p>
  </div>
  }

  @if (error()) {
  <div class="error-banner alert alert-warning alert-dismissible fade show" role="alert">
    <div class="d-flex align-items-center">
      <i class="fas fa-exclamation-triangle me-3 fs-4"></i>
      <div class="flex-grow-1">
        <h5 class="alert-heading mb-1">丘멆잺 Error al cargar</h5>
        <p class="mb-0">{{ error() }}</p>
      </div>
      <button type="button" class="btn-close" (click)="error.set(null)"></button>
    </div>
  </div>
  }

  <!-- Filtro por Tipo de Habitaci칩n -->
  <div class="filter-section mb-4">
    <div class="filter-tabs">
      <button class="filter-tab active">TODAS</button>
      <button class="filter-tab">SUITE</button>
      <button class="filter-tab">MATRI</button>
      <button class="filter-tab">SIMPLE</button>
    </div>
  </div>

  <!-- Grid de Habitaciones -->
  <div class="rooms-grid-container">
    <!-- Habitaciones Disponibles -->
    <div class="rooms-section available-rooms">
      <div class="section-header-premium">
        <div class="section-title-wrapper">
          <i class="fas fa-check-circle section-icon success"></i>
          <div>
            <h3 class="section-title">Habitaciones Disponibles</h3>
            <p class="section-subtitle">{{ getHabitacionesDisponibles().length }} habitaciones listas para reservar</p>
          </div>
        </div>
        <span class="section-badge success">{{ getHabitacionesDisponibles().length }}</span>
      </div>

      <div class="rooms-scroll-container">
        @for (habitacion of getHabitacionesDisponibles(); track habitacion.idHabitacion; let i = $index) {
        <div class="room-card-premium available" [style.animation-delay]="i * 0.1 + 's'">
          <div class="room-card-header">
            <div class="room-number">
              <span class="room-icon">游낃</span>
              <h4>{{ habitacion.tipoHabitacion }} {{ habitacion.numeroHabitacion }}</h4>
            </div>
            <div class="room-status-badge available">
              <i class="fas fa-check"></i>
              {{ getEstadoLegible(habitacion) }}
            </div>
          </div>

          <div class="room-card-body">
            <div class="room-features">
              <span class="feature-tag">
                <i class="fas fa-bed"></i>
                {{ habitacion.tipoHabitacion }}
              </span>
              <span class="feature-tag">
                <i class="fas fa-ruler-combined"></i>
                25m
              </span>
              <span class="feature-tag">
                <i class="fas fa-user-friends"></i>
                {{ habitacion.tipoHabitacion === 'SIMPLE' ? '1 Persona' : '2 Personas' }}
              </span>
            </div>

            <p class="room-description">{{ habitacion.descripcionHabitacion }}</p>

            <div class="room-amenities">
              <div class="amenity">
                <i class="fas fa-wifi"></i>
                <span>Wi-Fi</span>
              </div>
              <div class="amenity">
                <i class="fas fa-tv"></i>
                <span>TV</span>
              </div>
              <div class="amenity">
                <i class="fas fa-snowflake"></i>
                <span>A/C</span>
              </div>
              <div class="amenity">
                <i class="fas fa-bath"></i>
                <span>Ba침o</span>
              </div>
            </div>
          </div>

          <div class="room-card-footer">
            <div class="room-price">
              <span class="price-currency">$</span>
              <span class="price-amount">{{ habitacion.tipoHabitacion === 'SUITE' ? '250' : habitacion.tipoHabitacion === 'MATRI' ? '150' : '100' }}</span>
              <span class="price-period">/noche</span>
            </div>
            <div class="room-actions">
              <button class="btn-reserve">
                <i class="fas fa-calendar-check"></i>
                Reservar Ahora
              </button>
              <button class="btn-details">
                <i class="fas fa-expand"></i>
              </button>
            </div>
          </div>
        </div>
        } @empty {
        <div class="empty-rooms-state">
          <div class="empty-rooms-illustration">
            <i class="fas fa-door-closed"></i>
          </div>
          <h4>No hay habitaciones disponibles</h4>
          <p>Todas las habitaciones est치n ocupadas en este momento</p>
        </div>
        }
      </div>
    </div>

    <!-- Habitaciones Ocupadas -->
    <div class="rooms-section occupied-rooms">
      <div class="section-header-premium">
        <div class="section-title-wrapper">
          <i class="fas fa-times-circle section-icon danger"></i>
          <div>
            <h3 class="section-title">Habitaciones No Disponibles</h3>
            <p class="section-subtitle">{{ getHabitacionesOcupadas().length }} habitaciones no disponibles</p>
          </div>
        </div>
        <span class="section-badge danger">{{ getHabitacionesOcupadas().length }}</span>
      </div>

      <div class="rooms-scroll-container">
        @for (habitacion of getHabitacionesOcupadas(); track habitacion.idHabitacion; let i = $index) {
        <div class="room-card-premium occupied" [style.animation-delay]="i * 0.1 + 's'">
          <div class="room-card-header">
            <div class="room-number">
              <span class="room-icon">游뛂</span>
              <h4>{{ habitacion.tipoHabitacion }} {{ habitacion.numeroHabitacion }}</h4>
            </div>
            <div class="room-status-badge occupied">
              <i class="fas fa-clock"></i>
              {{ getEstadoLegible(habitacion) }}
            </div>
          </div>

          <div class="room-card-body">
            <div class="room-features">
              <span class="feature-tag">
                <i class="fas fa-bed"></i>
                {{ habitacion.tipoHabitacion }}
              </span>
              <span class="feature-tag">
                <i class="fas fa-ruler-combined"></i>
                25m
              </span>
              <span class="feature-tag">
                <i class="fas fa-user-friends"></i>
                {{ habitacion.tipoHabitacion === 'SIMPLE' ? '1 Persona' : '2 Personas' }}
              </span>
            </div>

            <p class="room-description">{{ habitacion.descripcionHabitacion }}</p>

            <div class="occupancy-info">
              <div class="occupancy-timeline">
                <div class="timeline-item">
                  <i class="fas fa-sign-in-alt"></i>
                  <span>Check-in: Hoy</span>
                </div>
                <div class="timeline-item">
                  <i class="fas fa-sign-out-alt"></i>
                  <span>Check-out: {{ getTiempoReservado(habitacion) }}</span>
                </div>
              </div>
            </div>
          </div>

          <div class="room-card-footer">
            <div class="occupied-message">
              <i class="fas fa-info-circle"></i>
              Disponible pr칩ximamente
            </div>
            <button class="btn-notify">
              <i class="fas fa-bell"></i>
              Notificar
            </button>
          </div>
        </div>
        } @empty {
        <div class="empty-rooms-state">
          <div class="empty-rooms-illustration">
            <i class="fas fa-door-open"></i>
          </div>
          <h4>No hay habitaciones ocupadas</h4>
          <p>Todas las habitaciones est치n disponibles</p>
        </div>
        }
      </div>
    </div>
  </div>
</div>